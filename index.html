<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/src/assets/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IPLook - 全面的IP信息和网络安全检测平台</title>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // 尝试获取用户真实IP地址
      window.getUserIP = (function () {
        var promise = new Promise(function (resolve, reject) {
          var ipRegex = /(?:[0-9]{1,3}\.){3}[0-9]{1,3}/;
          var request = new XMLHttpRequest();
          request.open('GET', 'https://api.ipify.org/?format=json', true);
          request.onload = function () {
            if (request.status >= 200 && request.status < 300) {
              try {
                var data = JSON.parse(request.responseText);
                resolve(data.ip);
              } catch (e) {
                reject(Error('JSON parse error'));
              }
            } else {
              reject(Error(request.statusText));
            }
          };
          request.onerror = function () {
            reject(Error('Network error'));
          };
          request.send();
        });
        return function () {
          return promise;
        };
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>